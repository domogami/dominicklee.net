{
  "version": 3,
  "sources": ["browser-route-module:/Users/dom/Documents/GitHub/dominicklee.net/app/routes/admin/new.tsx?browser", "../../../../app/routes/admin/new.tsx"],
  "sourcesContent": ["export { default } from \"/Users/dom/Documents/GitHub/dominicklee.net/app/routes/admin/new.tsx\";", "import { isErrorResponse } from '@remix-run/react/data';\nimport { redirect, Form, useActionData, useTransition } from 'remix';\nimport { createPost } from '~/post';\n\nimport Editor from '~/components/editor.client';\nimport { ClientOnly } from 'remix-utils';\nimport { useState } from 'react';\nconst axios = require('axios').default;\n\nexport let action = async ({ request }) => {\n  let formData = await request.formData();\n\n  let title = formData.get('title');\n  let coverUrl = formData.get('coverUrl');\n  let slug = formData.get('slug');\n  let description = formData.get('description');\n  let editorjs = formData.get('editorjs');\n\n  // Error handling\n  let errors: any = {};\n  if (!title) errors.title = true;\n  if (!coverUrl) errors.coverUrl = true;\n  if (!slug) errors.slug = true;\n  if (!description) errors.description = true;\n  if (!editorjs) errors.editorjs = true;\n\n  if (Object.keys(errors).length) {\n    return errors;\n  }\n\n  await createPost({ title, coverUrl, slug, description, editorjs });\n\n  return redirect('/admin');\n};\n\nexport default function NewPost() {\n  // pull in errors from our action using the useActionData() hook\n  let errors = useActionData();\n  // transition will allow us to create a better user experience by updating the text of the submit button while creating the blog post\n  let transition = useTransition();\n  // we are going to create the slug for the user\n  let slug = '';\n\n  // as the Title input is updated we will generate the slug automatically.\n  // My First Post slug would equal 'my-first-post'. We will convert to lower case and we will strip spaces and replace with hyphens\n  const handleChange = (e) => {\n    let text = e.target.value;\n    // using regex and replace, let's convert spaces to dashes\n    slug = text.replace(/\\s/g, '-');\n    // lets set the value of the slug text box to be our new slug in lowercase\n    document.getElementById('slugInput').value = slug.toLowerCase();\n  };\n\n  const [savedData, setSavedData] = useState('{}');\n  const [coverUrl, setCoverUrl] = useState('');\n  const [isSelected, setIsSelected] = useState(false);\n  const [selectedFile, setSelectedFile] = useState('');\n\n  return (\n    <Form reloadDocument method='post'>\n      <p>\n        <label htmlFor=''>\n          Post Title: {errors?.title && <em>Title is required</em>}{' '}\n          <input onChange={handleChange} type='text' name='title' />\n        </label>\n      </p>\n      <p>\n        <label htmlFor=''>\n          {' '}\n          Post Slug: {errors?.slug && <em>Slug is required</em>}\n          <input placeholder={slug} id='slugInput' type='text' name='slug' value=\"\" />\n        </label>\n      </p>\n      <p>\n        Insert Description:\n        <label htmlFor=''>\n          <input name='description' id='' />\n        </label>{' '}\n        {errors?.description && <em>Description is required</em>}\n      </p>\n      <p>\n        <ClientOnly>\n          {() => (\n            <Editor\n            saveOutput={savedData}\n            save={(savedData: any) => setSavedData(savedData)}\n            />\n          )}\n        </ClientOnly>\n      </p>\n      <input\n        name='editorjs'\n        value={savedData}\n        className='hidden'\n      />\n      <p>\n        <button type='submit'>\n          {transition.submission ? 'Creating...' : 'Create Post'}\n        </button>\n      </p>\n    </Form>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAMA,mBAAyB;AACzB,IAAM,QAAQ,gBAAiB;AA4BhB,mBAAmB;AAEhC,MAAI,SAAS;AAEb,MAAI,aAAa;AAEjB,MAAI,OAAO;AAIX,QAAM,eAAe,CAAC,MAAM;AAC1B,QAAI,OAAO,EAAE,OAAO;AAEpB,WAAO,KAAK,QAAQ,OAAO;AAE3B,aAAS,eAAe,aAAa,QAAQ,KAAK;AAAA;AAGpD,QAAM,CAAC,WAAW,gBAAgB,2BAAS;AAC3C,QAAM,CAAC,UAAU,eAAe,2BAAS;AACzC,QAAM,CAAC,YAAY,iBAAiB,2BAAS;AAC7C,QAAM,CAAC,cAAc,mBAAmB,2BAAS;AAEjD,SACE,oCAAC,MAAD;AAAA,IAAM,gBAAc;AAAA,IAAC,QAAO;AAAA,KAC1B,oCAAC,KAAD,MACE,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,KAAG,gBACH,kCAAQ,UAAS,oCAAC,MAAD,MAAI,sBAAwB,KAC1D,oCAAC,SAAD;AAAA,IAAO,UAAU;AAAA,IAAc,MAAK;AAAA,IAAO,MAAK;AAAA,QAGpD,oCAAC,KAAD,MACE,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,KACZ,KAAI,eACO,kCAAQ,SAAQ,oCAAC,MAAD,MAAI,qBAChC,oCAAC,SAAD;AAAA,IAAO,aAAa;AAAA,IAAM,IAAG;AAAA,IAAY,MAAK;AAAA,IAAO,MAAK;AAAA,IAAO,OAAM;AAAA,QAG3E,oCAAC,KAAD,MAAG,uBAED,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,KACb,oCAAC,SAAD;AAAA,IAAO,MAAK;AAAA,IAAc,IAAG;AAAA,OACtB,KACR,kCAAQ,gBAAe,oCAAC,MAAD,MAAI,6BAE9B,oCAAC,KAAD,MACE,oCAAC,YAAD,MACG,MACC,oCAAC,QAAD;AAAA,IACA,YAAY;AAAA,IACZ,MAAM,CAAC,eAAmB,aAAa;AAAA,QAK7C,oCAAC,SAAD;AAAA,IACE,MAAK;AAAA,IACL,OAAO;AAAA,IACP,WAAU;AAAA,MAEZ,oCAAC,KAAD,MACE,oCAAC,UAAD;AAAA,IAAQ,MAAK;AAAA,KACV,WAAW,aAAa,gBAAgB;AAAA;",
  "names": []
}
