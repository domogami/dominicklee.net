import{a as T,b as f}from"/build/_shared/chunk-GMW25TLS.js";import{a as g}from"/build/_shared/chunk-JXEXJS47.js";import"/build/_shared/chunk-LYCP5ARG.js";import{i as d,j as u,k as p,l as m}from"/build/_shared/chunk-3QXOOPD6.js";import{d as x,g as S,h as e,i as o}from"/build/_shared/chunk-2ADOHOB6.js";o();o();var i=x(S()),C=T().default;function c(){let t=p(),v=m(),l=u(),[s,h]=(0,i.useState)("{}"),[b,y]=(0,i.useState)(l.coverUrl),[j,U]=(0,i.useState)(!1),[F,N]=(0,i.useState)("");async function P(r){let n=r.target.files[0],a=await C({method:"post",url:"/.netlify/functions/uploadImage",data:n.name});console.log(a.data.url),console.log("ATTEMPTING PUT");let D=(await fetch(a.data.url,{method:"PUT",headers:{"Content-Type":"multipart/form-data"},body:n})).url.split("?")[0];y(D),U(!0)}return e.createElement(d,{reloadDocument:!0,method:"post"},e.createElement("div",{className:"edit-post-container"},e.createElement("h2",null,"Edit Post"),e.createElement("img",{className:"cover-preview",src:l.coverUrl}),e.createElement("p",null,e.createElement("label",{htmlFor:""},"Post Title: ",(t==null?void 0:t.title)&&e.createElement("em",null,"Title is required")," ",e.createElement("input",{type:"text",name:"title",defaultValue:l.title}))),e.createElement("p",null,e.createElement("label",{htmlFor:""},"Post Cover: ",(t==null?void 0:t.coverUrl)&&e.createElement("em",null,"Cover is required")," ",e.createElement("input",{type:"file",name:"cover",value:F,onChange:P}))),e.createElement("p",null,e.createElement("label",{htmlFor:""}," ","Post Slug: ",(t==null?void 0:t.slug)&&e.createElement("em",null,"Slug is required"),e.createElement("input",{defaultValue:l.slug,id:"slugInput",type:"text",name:"slug"}))),e.createElement("p",null,"Insert Description:",e.createElement("label",{htmlFor:""},e.createElement("input",{defaultValue:l.description,name:"description",id:""}))," ",(t==null?void 0:t.description)&&e.createElement("em",null,"Description is required"),e.createElement("br",null),e.createElement(g,null,()=>e.createElement(f,{className:"editor-block",previousData:l.editorjs,saveOutput:s,save:r=>h(r)}))),e.createElement("p",null,e.createElement("button",{type:"submit"},v.submission?"Updating...":"Update Post")),e.createElement("input",{defaultValue:l.editorjs,name:"editorjs",value:s,className:"hiddenEditorField"}),e.createElement("label",{htmlFor:""},e.createElement("input",{className:"hidden",type:"text",name:"coverUrl",defaultValue:b})),e.createElement("input",{className:"hidden",name:"id",value:l.id})))}export{c as default};
