{
  "version": 3,
  "sources": ["browser-route-module:/Users/dom/Documents/GitHub/dominicklee.net/app/routes/admin/$edit.tsx?browser", "../../../../app/routes/admin/$edit.tsx", "../../../../app/components/editor.client.tsx"],
  "sourcesContent": ["export { default } from \"/Users/dom/Documents/GitHub/dominicklee.net/app/routes/admin/$edit.tsx\";", "import invariant from 'tiny-invariant';\nimport { getPostEdit } from '~/post';\nimport {\n  redirect,\n  Form,\n  useActionData,\n  useTransition,\n  useLoaderData,\n} from 'remix';\nimport { updatePost } from '~/post';\nimport Editor from '~/components/editor.client';\nimport { ClientOnly } from 'remix-utils';\nimport { useState } from 'react';\n\nexport let loader = async ({ params }) => {\n  invariant(params.edit, 'expected params.edit');\n  return getPostEdit(params.edit);\n};\n\nexport let action = async ({ request }) => {\n  console.log('going to submit form');\n  let formData = await request.formData();\n\n  let title = formData.get('title');\n  let slug = formData.get('slug');\n  let markdown = formData.get('markdown');\n  let editorjs = formData.get('editorjs');\n  let id = formData.get('id');\n\n  // let errors = {};\n  // if (!title) errors.title = true;\n  // if (!slug) errors.slug = true;\n  // if (!markdown) errors.markdown = true;\n  // if (!editorjs) errors.editorjs = true;\n\n  // if (Object.keys(errors).length) {\n  //   return errors;\n  // }\n\n  console.log(\n    'calling updatePost with id, title, slug, markdown: ',\n    id,\n    title,\n    slug,\n    markdown,\n    editorjs\n  );\n  await updatePost({ id, title, slug, markdown, editorjs });\n\n  return redirect('/admin');\n};\n// let savedData = null;\nexport default function PostSlug() {\n  let errors = useActionData();\n  let transition = useTransition();\n  let post = useLoaderData();\n  const [savedData, setSavedData] = useState('{}');\n  // const [savedOutput, setSavedOutput] = useState('{}');\n\n  // const passFunction = (saveOutput) => {\n  //   setSavedData(saveOutput);\n  // };\n\n  return (\n    <Form reloadDocument method=\"post\">\n      <p>\n        <input className=\"hiddenBlogID\" name=\"id\" value={post.id}></input>\n      </p>\n      <p>\n        <label htmlFor=\"\">\n          Post Title: {errors?.title && <em>Title is required</em>}{' '}\n          <input type=\"text\" name=\"title\" defaultValue={post.title} />\n        </label>\n      </p>\n      <p>\n        <label htmlFor=\"\">\n          {' '}\n          Post Slug: {errors?.slug && <em>Slug is required</em>}\n          <input\n            defaultValue={post.slug}\n            id=\"slugInput\"\n            type=\"text\"\n            name=\"slug\"\n          />\n        </label>\n      </p>\n      <p>\n        <label htmlFor=\"markdown\">Markdown:</label>{' '}\n        {errors?.markdown && <em>Markdown is required</em>}\n        <br />\n        <ClientOnly>\n          {() => (\n            <Editor\n              previousData={post.editorjs}\n              saveOutput={savedData}\n              save={(savedData: any) => setSavedData(savedData)}\n            />\n          )}\n        </ClientOnly>\n        <input\n          defaultValue={post.editorjs}\n          name=\"editorjs\"\n          value={savedData}\n          id=\"\"\n        ></input>\n        <textarea defaultValue={post.markdown} name=\"markdown\" id=\"\" />\n      </p>\n      <p>\n        <button type=\"submit\">\n          {transition.submission ? 'Updating...' : 'Update Post'}\n        </button>\n      </p>\n    </Form>\n  );\n}\n", "import React from 'react';\nimport { createReactEditorJS } from 'react-editor-js';\nimport { EDITOR_JS_TOOLS } from './editorjsPlugins';\nconst ReactEditorJS = createReactEditorJS();\nimport { useEffect, useRef, useState } from 'react';\n\nexport default function Editor(props) {\n  const editorCore = React.useRef(null);\n  const handleInitialize = React.useCallback((instance) => {\n    editorCore.current = instance;\n  }, []);\n\n  // Function that saves and updates database\n  const handleSave = React.useCallback(async () => {\n    const savedData = await editorCore.current.save();\n    props.save(JSON.stringify(savedData));\n  }, []);\n\n  return (\n    <>\n      <ReactEditorJS\n        onChange={handleSave}\n        onInitialize={handleInitialize}\n        tools={EDITOR_JS_TOOLS}\n        defaultValue={JSON.parse(props.previousData)}\n      // readOnly={true}\n      />\n      <button onClick={handleSave} type=\"button\">\n        Save Content\n      </button>\n    </>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;;;ACAA;AAAA,mBAAkB;AAGlB,IAAM,gBAAgB;AAGP,gBAAgB,OAAO;AACpC,QAAM,aAAa,qBAAM,OAAO;AAChC,QAAM,mBAAmB,qBAAM,YAAY,CAAC,aAAa;AACvD,eAAW,UAAU;AAAA,KACpB;AAGH,QAAM,aAAa,qBAAM,YAAY,YAAY;AAC/C,UAAM,YAAY,MAAM,WAAW,QAAQ;AAC3C,UAAM,KAAK,KAAK,UAAU;AAAA,KACzB;AAEH,SACE,wFACE,mDAAC,eAAD;AAAA,IACE,UAAU;AAAA,IACV,cAAc;AAAA,IACd,OAAO;AAAA,IACP,cAAc,KAAK,MAAM,MAAM;AAAA,MAGjC,mDAAC,UAAD;AAAA,IAAQ,SAAS;AAAA,IAAY,MAAK;AAAA,KAAS;AAAA;;;ADfjD,oBAAyB;AAwCV,oBAAoB;AACjC,MAAI,SAAS;AACb,MAAI,aAAa;AACjB,MAAI,OAAO;AACX,QAAM,CAAC,WAAW,gBAAgB,4BAAS;AAO3C,SACE,oCAAC,MAAD;AAAA,IAAM,gBAAc;AAAA,IAAC,QAAO;AAAA,KAC1B,oCAAC,KAAD,MACE,oCAAC,SAAD;AAAA,IAAO,WAAU;AAAA,IAAe,MAAK;AAAA,IAAK,OAAO,KAAK;AAAA,OAExD,oCAAC,KAAD,MACE,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,KAAG,gBACH,kCAAQ,UAAS,oCAAC,MAAD,MAAI,sBAAwB,KAC1D,oCAAC,SAAD;AAAA,IAAO,MAAK;AAAA,IAAO,MAAK;AAAA,IAAQ,cAAc,KAAK;AAAA,QAGvD,oCAAC,KAAD,MACE,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,KACZ,KAAI,eACO,kCAAQ,SAAQ,oCAAC,MAAD,MAAI,qBAChC,oCAAC,SAAD;AAAA,IACE,cAAc,KAAK;AAAA,IACnB,IAAG;AAAA,IACH,MAAK;AAAA,IACL,MAAK;AAAA,QAIX,oCAAC,KAAD,MACE,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,KAAW,cAAkB,KAC3C,kCAAQ,aAAY,oCAAC,MAAD,MAAI,yBACzB,oCAAC,MAAD,OACA,oCAAC,YAAD,MACG,MACC,oCAAC,QAAD;AAAA,IACE,cAAc,KAAK;AAAA,IACnB,YAAY;AAAA,IACZ,MAAM,CAAC,eAAmB,aAAa;AAAA,OAI7C,oCAAC,SAAD;AAAA,IACE,cAAc,KAAK;AAAA,IACnB,MAAK;AAAA,IACL,OAAO;AAAA,IACP,IAAG;AAAA,MAEL,oCAAC,YAAD;AAAA,IAAU,cAAc,KAAK;AAAA,IAAU,MAAK;AAAA,IAAW,IAAG;AAAA,OAE5D,oCAAC,KAAD,MACE,oCAAC,UAAD;AAAA,IAAQ,MAAK;AAAA,KACV,WAAW,aAAa,gBAAgB;AAAA;",
  "names": []
}
